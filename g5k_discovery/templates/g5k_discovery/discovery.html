{% load staticfiles %}

<html>
<head>
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static "bootstrap/css/bootstrap.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "css/custom.css" %}">
{% endblock css %}
</head>
{% block content %}
    <body ng-app="discoveryApp" class="discovery-app">
    <div class="content" ng-controller="AppController">

        <div ng-if="loading" class="well">
            <h4>
                <i class="icon icon-spinner icon-spin"></i> Loading ...
            </h4>
        </div>

        <div ng-if="! loading">
            <div class="col col-sm-8">
              <h3 class="title">Nodes</h3>
               <div><strong>[[selectednodes.length]]</strong> nodes<span ng-if="selectednodes.length != allnodes.length"> filtered from [[allnodes.length]] originally.(<a href="javascript:" ng-click="resetFilters()">Reset all Filters</a>)</span></div>
              <div class="panel" ng-repeat="node in selectednodes">
                <div class="panel-heading clearfix">
                  <h4 class="panel-title well">[[node.uid]]</h4>
                </div>
                <div>[[node.version]]</div>
              </div>
            </div>
            <div class="col col-sm-4">
                <h4>Facets</h4>
                <div><strong>Search</strong></div>
                <div><input type="text"></div>
                </br>
                <div><strong>Site</strong></div>
                <div ng-repeat="site in filtered_sites">
                <div><input type="checkbox" name="key" ng-model="filter.selectedSites[site.uid]" ng-change="applySiteFilter(site.uid)"> [[site.name]] ([[site.node_count]])</div>
                </div>
                </br>

                <div><strong>Cluster</strong></div>

                      <div ng-repeat="site in filtered_sites track by site.uid">
                        <div ng-repeat="cluster in site.clusters track by cluster.uid">
                        <div><input type="checkbox" name="key" ng-model="filter.selectedClusters[cluster.uid]" ng-change="applyClusterFilter(site.uid, cluster.uid)"> [[cluster.uid]] ([[cluster.node_count]])</div>
                        </div>
                      </div>
                </br>
                <div><strong>Virtual Support</strong></div>
                <div><input type="checkbox" name="vehicle" ng-model="filter.hasVirtualSupport" ng-change="applyFilter()"> Test</div>
                </br>
                <div><strong>Besteffort Support</strong></div>
                <div><input type="checkbox" name="vehicle" ng-model="filter.hasBestEffortSupport" ng-change="applyFilter()"> Test</div>
                </br>
                <div><strong>Deploy Support</strong></div>
                <div><input type="checkbox" name="vehicle" ng-model="filter.hasDeploySupport" ng-change="applyFilter()"> Test</div>
                </br>
                <div><strong>Network adapter interface #1</strong></div>
                <div ng-repeat="(key, value) in net_adap_inf_1">
                <div><input type="checkbox" name="key" ng-model="filter.selectedNetAdap1[key]" ng-change="preApplyOtherFilters()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Network adapter interface #2</strong></div>
                <div ng-repeat="(key, value) in net_adap_inf_2">
                <div><input type="checkbox" name="key" ng-model="filter.selectedNetAdap2[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Network adapter interface #3</strong></div>
                <div ng-repeat="(key, value) in net_adap_inf_3">
                <div><input type="checkbox" name="key" ng-model="filter.selectedNetAdap3[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Main storage device interface</strong></div>
                <div ng-repeat="(key, value) in storage_dev_inf">
                <div><input type="checkbox" name="key" ng-model="filter.selectedStorageDevInf[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Main storage device size(GB)</strong></div>
                <div ng-repeat="(key, value) in storage_dev_size">
                <div><input type="checkbox" name="key" ng-model="filter.selectedStorageDevSize[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong># CPUs</strong></div>
                <div ng-repeat="(key, value) in cpus">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCpus[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong># Cores</strong></div>
                <div ng-repeat="(key, value) in cores">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCores[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>RAM (MiB)</strong></div>
                <div ng-repeat="(key, value) in rams">
                <div><input type="checkbox" name="key" ng-model="filter.selectedRams[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>CPU Clock Speed (GHz)</strong></div>
                <div ng-repeat="(key, value) in clocks">
                <div><input type="checkbox" name="key" ng-model="filter.selectedClockSpeed[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Processor model</strong></div>
                <div ng-repeat="(key, value) in processor_models">
                <div><input type="checkbox" name="key" ng-model="filter.selectedProcessorModels[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Processor cache l1d (KiB)</strong></div>
                <div ng-repeat="(key, value) in cache_l1d">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCachel1d[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Processor cache l1i (KiB)</strong></div>
                <div ng-repeat="(key, value) in cache_l1i">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCachel1i[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Processor cache l1 (KiB)</strong></div>
                <div ng-repeat="(key, value) in cache_l1">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCachel1[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
                <div><strong>Processor cache l2 (KiB)</strong></div>
                <div ng-repeat="(key, value) in cache_l2">
                <div><input type="checkbox" name="key" ng-model="filter.selectedCachel12[key]" ng-change="applyFilter()"> [[key]] ([[value.count]])</div>
                </div>
                </br>
            </div>


        </div>
    </div>

    </div>
    </body>
{% endblock content %}
{% block js %}
    <script src="{% static "underscore/underscore.js" %}"></script>
    <script src="{% static "angular/angular.js" %}"></script>
    <script src="{% static 'djangular/js/django-angular.min.js' %}"></script>
    <script src="{% static "scripts/app.js" %}"></script>
    <script src="{% static "scripts/controller.js" %}"></script>
{% endblock js %}

</html>